
:root{--bg:#0a0a0a;--fg:#ffffff;--font-sans: ui-sans-serif;--muted:#cbd5e1;--card:#111318;--card-bd:#243244;--accent:#2563eb;--accent-contrast:#ffffff;--danger:#ef4444;--info-bg:rgba(37,99,235,.08);--control-h:40px;--binder-overlap:10px;--radius-card:14px;--stack-gap:12px;--tab-extend:calc(var(--stack-gap) + 1px)}
@media(prefers-color-scheme:light){:root{--bg:#f8fafc;--fg:#0b1220;--muted:#475569;--card:#ffffff;--card-bd:#d0d7e2;--accent:#1e40af;--accent-contrast:#ffffff;--danger:#b91c1c}}
[data-theme="light"]{--bg:#f8fafc;--fg:#0b1220;--muted:#475569;--card:#ffffff;--card-bd:#d0d7e2;--accent:#1e40af;--accent-contrast:#ffffff;--danger:#b91c1c}
[data-theme="dark"]{--bg:#0a0a0a;--fg:#ffffff;--muted:#cbd5e1;--card:#111318;--card-bd:#243244;--accent:#2563eb;--accent-contrast:#ffffff;--danger:#ef4444}
[data-theme="contrast"]{--bg:#000000;--fg:#ffffff;--muted:#e2e8f0;--card:#000000;--card-bd:#ffffff;--accent:#ffcc00;--accent-contrast:#000000;--danger:#ff4d4d}
body{background:var(--bg);color:var(--fg);margin:0}
.flex-1{flex:1}
.card{background:var(--card);border:1px solid var(--card-bd);border-radius:14px;padding:16px}
.header-controls{align-items:flex-end} /* bottom-align Theme + Past Draws */
.header-controls .btn { margin-bottom: 0; }
.controls label{display:flex;flex-direction:column;gap:4px} /* clean label+field stack */
.btn{border-radius:10px;border:1px solid var(--card-bd);padding:10px 14px;cursor:pointer}
.btn-primary{background:var(--accent);color:var(--accent-contrast);border-color:transparent}
.btn-ghost{background:transparent;color:var(--fg)}
.btn{min-height:var(--control-h);display:inline-flex;align-items:center;line-height:1.2}
.chip{display:inline-block;border:1px solid var(--card-bd);border-radius:999px;padding:4px 8px;font-size:12px;margin:2px}
.chip.warn{border-color:var(--danger);color:var(--danger)}
.btn:focus{outline:3px solid rgba(37,99,235,.5);outline-offset:2px}
.grid{display:grid;gap:16px}
.controls{display:flex;flex-wrap:wrap;gap:12px;align-items:center}
table{width:100%;border-collapse:collapse}
th,td{padding:8px;border-bottom:1px solid var(--card-bd)}
.mono{font-family: ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}
label > span{font-size:12px;opacity:.8}
input,select{background:var(--card);color:var(--fg);border:1px solid var(--card-bd);border-radius:8px;padding:8px;min-height:var(--control-h);line-height:1.2;display:block}
select{
  appearance:none;
  background-position:right 10px center;
  background-repeat:no-repeat;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='14' height='14' viewBox='0 0 20 20' fill='none'%3E%3Cpath d='M5 7l5 5 5-5' stroke='%239aa4b2' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
  padding-right: 2rem;
}
select option{background:var(--card);color:var(--fg)}
@media (forced-colors: active){select,option{forced-color-adjust:auto;background:Canvas;color:CanvasText}}
input[type="range"]{width:100%}
.hint{font-size:12px;opacity:.8}
.help{position:relative;display:inline-flex;justify-content:center;align-items:center;margin-left:6px;cursor:help;border:1px solid var(--card-bd);border-radius:999px;padding:0 6px;font-size:11px;line-height:18px;min-width:18px;height:18px}
.help[data-tip]:hover::after,.help[data-tip]:focus-visible::after{content:attr(data-tip);position:absolute;left:50%;transform:translateX(-50%);bottom:calc(100% + 8px);background:var(--card);color:var(--fg);border:1px solid var(--card-bd);border-radius:8px;padding:8px 10px;width:min(320px,80vw);z-index:20;pointer-events:none;white-space:pre-wrap}
.help[data-tip]:hover::before,.help[data-tip]:focus-visible::before{content:'';position:absolute;width:8px;height:8px;background:var(--card);border-left:1px solid var(--card-bd);border-top:1px solid var(--card-bd);transform:translateX(-50%) rotate(45deg);left:50%;bottom:calc(100% + 4px)}
.compact table th,.compact table td{padding:4px 6px;font-size:12px}

.sidebar{position:fixed;top:0;right:0;height:100vh;width:min(420px,90vw);background:var(--card);border-left:1px solid var(--card-bd);box-shadow:-8px 0 24px rgba(0,0,0,.25);transform:translateX(100%);transition:transform .25s ease;z-index:100}
.sidebar.open{transform:translateX(0)}
.backdrop{position:fixed;inset:0;background:rgba(0,0,0,.4);backdrop-filter:saturate(80%) blur(1px);z-index:90}
main{max-width:1180px;margin:0 auto;padding:24px}
/* bottom-sheet variant for mobile */
.sidebar.bottom{top:auto;right:auto;left:0;bottom:0;width:100%;height:min(70vh, 90vh);border-left:none;border-top:1px solid var(--card-bd);box-shadow:0 -8px 24px rgba(0,0,0,.25);transform:translateY(100%);transition:transform .25s ease}
.sidebar.bottom.open{transform:translateY(0)}

/* ===== Binder tabs (shared) ===== */
[data-binder-tabs]{position:relative; z-index:10;}  /* put header (and skirt) above the panel */
[data-binder-tabs] > header{margin-bottom:calc(var(--stack-gap))} /* <- controls headerâ†’panel spacing */
[data-binder-tabs] .tabbar{
  display:flex;align-items:flex-end;gap:8px;margin:0;margin-bottom:calc(-1*var(--binder-overlap));
  flex-wrap:wrap
}
[data-binder-tabs] .tabbar .btn{
  border:1px solid var(--card-bd);
  border-radius:var(--radius-card) var(--radius-card) 0 0;
  padding:8px 14px;line-height:1.1;
  background:var(--bg);color:var(--muted);
  position:relative;z-index:1;
  transition:transform .12s ease,color .12s ease,background .12s ease,box-shadow .12s ease;
  max-width:38ch;white-space:nowrap;overflow:hidden;text-overflow:ellipsis
}
[data-binder-tabs] .tabbar .btn[aria-selected="true"]{
  background:var(--card);color:var(--fg);border-color:var(--card-bd);
  border-bottom-color:var(--card);z-index:3;box-shadow:0 1px 0 var(--card) inset
}
/* Extend the active tab down so it meets (and overlaps) the panel */
[data-binder-tabs] .tabbar .btn[aria-selected="true"]::after{
  content:"";
  position:absolute;
  left:-1px; right:-1px;
  top:calc(100% - 1px);        /* start just 1px into the panel to cover its top border */
  height:var(--tab-extend);    /* now grows downward */
  background:var(--card);
  border-left:1px solid var(--card-bd);
  border-right:1px solid var(--card-bd);
  pointer-events:none;z-index:1;       /* stays above the panel */
}
[data-binder-tabs] .tabbar .btn[aria-selected="false"]{transform:translateY(2px);z-index:0}
[data-binder-tabs] .tabbar .btn[aria-selected="false"]:hover{
  color:var(--fg);background:color-mix(in oklab, var(--card) 40%, transparent)
}
[data-binder-tabs] .tabbar .btn:focus-visible{outline:2px solid var(--accent);outline-offset:2px}

/* Panel docks visually under the tab; header owns the spacing, so no negative margin here */
[data-binder-tabs]+.card,
[data-binder-tabs]+.grid{position:relative;z-index:2}
[data-binder-tabs]+.card{border-top-left-radius:14;border-top-right-radius:var(--radius-card)}
[data-binder-tabs]+.grid>.card:first-child{position:relative;z-index:2;border-top-left-radius:0}

@media (max-width:768px){
  [data-binder-tabs] .tabbar{gap:6px}
  [data-binder-tabs] .tabbar .btn{padding:7px 12px}
}

@media (prefers-reduced-motion: reduce){.sidebar, .sidebar.bottom { transition: none !important; }}
/* ---- Header alignment fix: bottom-align label+select with button ---- */
/* Place AFTER .controls so it wins on specificity+order */
.controls.header-controls{ align-items: flex-end; }
/* Optional: ensure the button doesn't have stray baseline quirks */
.controls.header-controls .btn{ align-self: flex-end; }
